<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <title>生成 PNG 圖示</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f0f0f0;
      }
      .icon-container {
        display: inline-block;
        margin: 10px;
        padding: 10px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
      canvas {
        display: block;
        margin: 10px auto;
        border: 1px solid #ddd;
      }
      button {
        margin: 10px;
        padding: 10px 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
      }
      button:hover {
        opacity: 0.9;
      }
      h1 {
        color: #333;
      }
      .instructions {
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #667eea;
      }
    </style>
  </head>
  <body>
    <h1>NPM 套件收藏 Chrome 擴充功能圖示生成器</h1>

    <div class="instructions">
      <h3>使用說明：</h3>
      <ol>
        <li>點擊下方的「生成所有圖示」按鈕</li>
        <li>右鍵點擊每個圖示，選擇「另存圖片為...」</li>
        <li>將圖示儲存為對應的檔名（icon16.png, icon32.png, icon48.png, icon128.png）</li>
      </ol>
    </div>

    <button onclick="generateAllIcons()">生成所有圖示</button>

    <div id="icons"></div>

    <script>
      function drawIcon(canvas, size) {
        const ctx = canvas.getContext("2d");
        canvas.width = size;
        canvas.height = size;

        // 清除畫布
        ctx.clearRect(0, 0, size, size);

        // 設定漸層背景
        const gradient = ctx.createLinearGradient(0, 0, size, size);
        gradient.addColorStop(0, "#667eea");
        gradient.addColorStop(1, "#764ba2");

        // 繪製圓角矩形背景
        const radius = size * 0.15;
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.moveTo(radius, 0);
        ctx.lineTo(size - radius, 0);
        ctx.quadraticCurveTo(size, 0, size, radius);
        ctx.lineTo(size, size - radius);
        ctx.quadraticCurveTo(size, size, size - radius, size);
        ctx.lineTo(radius, size);
        ctx.quadraticCurveTo(0, size, 0, size - radius);
        ctx.lineTo(0, radius);
        ctx.quadraticCurveTo(0, 0, radius, 0);
        ctx.closePath();
        ctx.fill();

        // 繪製 NPM 立方體圖示
        const centerX = size / 2;
        const centerY = size / 2;
        const scale = size / 128; // 基於 128px 的縮放比例

        ctx.strokeStyle = "white";
        ctx.lineWidth = Math.max(1, 4 * scale);
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        // 立方體前面
        ctx.beginPath();
        ctx.moveTo(centerX - 25 * scale, centerY - 10 * scale);
        ctx.lineTo(centerX - 25 * scale, centerY + 20 * scale);
        ctx.lineTo(centerX + 25 * scale, centerY + 20 * scale);
        ctx.lineTo(centerX + 25 * scale, centerY - 10 * scale);
        ctx.closePath();
        ctx.stroke();

        // 立方體頂部
        ctx.beginPath();
        ctx.moveTo(centerX - 25 * scale, centerY - 10 * scale);
        ctx.lineTo(centerX, centerY - 25 * scale);
        ctx.lineTo(centerX + 35 * scale, centerY - 15 * scale);
        ctx.lineTo(centerX + 25 * scale, centerY - 10 * scale);
        ctx.closePath();
        ctx.stroke();

        // 立方體側面
        ctx.beginPath();
        ctx.moveTo(centerX + 25 * scale, centerY - 10 * scale);
        ctx.lineTo(centerX + 35 * scale, centerY - 15 * scale);
        ctx.lineTo(centerX + 35 * scale, centerY + 15 * scale);
        ctx.lineTo(centerX + 25 * scale, centerY + 20 * scale);
        ctx.closePath();
        ctx.stroke();

        // 星星（只在較大圖示顯示）
        if (size >= 32) {
          const starX = centerX + 30 * scale;
          const starY = centerY - 30 * scale;
          const starSize = 8 * scale;

          ctx.fillStyle = "#FFD700";
          ctx.beginPath();
          for (let i = 0; i < 5; i++) {
            const angle = ((Math.PI * 2) / 5) * i - Math.PI / 2;
            const outerX = starX + Math.cos(angle) * starSize;
            const outerY = starY + Math.sin(angle) * starSize;

            if (i === 0) {
              ctx.moveTo(outerX, outerY);
            } else {
              ctx.lineTo(outerX, outerY);
            }

            const innerAngle = angle + Math.PI / 5;
            const innerX = starX + Math.cos(innerAngle) * (starSize * 0.4);
            const innerY = starY + Math.sin(innerAngle) * (starSize * 0.4);
            ctx.lineTo(innerX, innerY);
          }
          ctx.closePath();
          ctx.fill();
        }

        // NPM 文字（只在 48px 以上顯示）
        if (size >= 48) {
          ctx.fillStyle = "white";
          ctx.font = `bold ${16 * scale}px Arial, sans-serif`;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillText("NPM", centerX, centerY + 36 * scale);
        }
      }

      function generateAllIcons() {
        const sizes = [16, 32, 48, 128];
        const container = document.getElementById("icons");
        container.innerHTML = "";

        sizes.forEach(size => {
          const div = document.createElement("div");
          div.className = "icon-container";

          const title = document.createElement("h3");
          title.textContent = `${size}x${size} (icon${size}.png)`;
          div.appendChild(title);

          const canvas = document.createElement("canvas");
          canvas.id = `icon${size}`;
          div.appendChild(canvas);

          container.appendChild(div);

          drawIcon(canvas, size);
        });

        // 添加批量下載按鈕
        const downloadBtn = document.createElement("button");
        downloadBtn.textContent = "下載所有圖示（需手動儲存）";
        downloadBtn.style.display = "block";
        downloadBtn.style.margin = "20px auto";
        downloadBtn.onclick = downloadAll;
        container.appendChild(downloadBtn);
      }

      function downloadAll() {
        const sizes = [16, 32, 48, 128];
        sizes.forEach((size, index) => {
          setTimeout(() => {
            const canvas = document.getElementById(`icon${size}`);
            const link = document.createElement("a");
            link.download = `icon${size}.png`;
            link.href = canvas.toDataURL();
            link.click();
          }, index * 200);
        });
      }

      // 頁面載入時自動生成
      window.onload = () => {
        generateAllIcons();
      };
    </script>
  </body>
</html>
